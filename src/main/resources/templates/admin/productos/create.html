<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registrar Producto</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Fuente y Tailwind -->
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link rel="stylesheet" as="style" onload="this.rel='stylesheet'"
          href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans:wght@400;500;700;900&family=Plus+Jakarta+Sans:wght@400;500;700;800"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>
<body style="font-family: 'Plus Jakarta Sans', 'Noto Sans', sans-serif;">

<div class="relative flex size-full min-h-screen flex-col bg-white overflow-x-hidden">

    <!-- NAVBAR -->
    <nav class="navbar bg-black text-white p-4 flex justify-between">
        <h4 class="text-white mb-0">Hecho con Amor</h4>
        <div class="flex gap-4">
            <a class="nav-link active" href="/index"><i class="bi bi-house-door me-2"></i>Inicio</a>
            <a class="nav-link" href="/usuarios"><i class="bi bi-people me-2"></i>Usuarios</a>
            <a class="nav-link" href="/categorias"><i class="bi bi-tags me-2"></i>Categorías</a>
            <a class="nav-link" href="/productos"><i class="bi bi-box-seam me-2"></i>Productos</a>
            <a class="nav-link" href="/clientes"><i class="bi bi-box-seam me-2"></i>Clientes</a>
        </div>
    </nav>

    <!-- FORMULARIO -->
    <div class="px-4 md:px-40 flex justify-center py-5 flex-1">
        <form th:action="@{/productos/guardar}" th:object="${producto}" method="post" enctype="multipart/form-data"
              class="flex flex-col w-full max-w-[512px]">

            <!-- Imagen de cabecera -->
            <div class="w-full bg-center bg-no-repeat bg-cover flex flex-col justify-end overflow-hidden bg-white rounded-lg min-h-[218px]"
                 style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCej04KO6mj_80Q4udO6M-nHQNv8hdTohWMWvv0dP-2P-cGInlFy6-8nFp_koMQm06ujywtXoYUA-GqmtZGi0XBW3hebUA_txWAzUlgLTaaD0YUsOmKOVpKKBueRwQgNBRIsw12S9rn0_XLyeDkOs34HK05rE9wNca_Znmo-2eGgvNv2cxsvgzr6eVg0GjNDRUzfWds4AVPR73-ig6ZfK8FZFEZ6JTXK9jgmxmlmhiIf2jyf1ahgab2fxXzrT6joJA0Or5T1GLEY6SM');">
            </div>

            <h2 class="text-gray-900 tracking-light text-[28px] font-bold leading-tight px-4 text-center pb-3 pt-5">
                Registrar Producto
            </h2>

            <!-- NOMBRE -->
            <div class="px-4 py-3">
                <input th:field="*{nombre}" type="text" placeholder="Nombre del producto"
                       class="form-input w-full rounded-lg bg-[#f0f3f4] h-14 p-4 text-base placeholder:text-gray-500"/>
                <p class="text-red-500 text-sm mt-1" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></p>
            </div>

            <!-- CATEGORÍA -->
            <div class="px-4 py-3">
                <select th:field="*{categoria.idCategoria}"
                        class="form-input w-full rounded-lg bg-[#f0f3f4] h-14 p-4 text-base">
                    <option value="" disabled selected>Seleccione una categoría</option>
                    <option th:each="cat : ${categorias}"
                            th:value="${cat.idCategoria}"
                            th:text="${cat.nombre}"></option>
                </select>
            </div>

            <!-- DESCRIPCIÓN -->
            <div class="px-4 py-3">
                <textarea th:field="*{descripcion}" placeholder="Descripción"
                          class="form-input w-full rounded-lg bg-[#f0f3f4] min-h-36 p-4 text-base placeholder:text-gray-500"></textarea>
            </div>

            <!-- PRECIO -->
            <div class="px-4 py-3">
                <input th:field="*{precio}" type="number" step="0.01" placeholder="Precio"
                       class="form-input w-full rounded-lg bg-[#f0f3f4] h-14 p-4 text-base placeholder:text-gray-500"/>
                <p class="text-red-500 text-sm mt-1" th:if="${#fields.hasErrors('precio')}" th:errors="*{precio}"></p>
            </div>

            <!-- STOCK -->
            <div class="px-4 py-3">
                <input th:field="*{stock}" type="number" min="0" placeholder="Stock"
                       class="form-input w-full rounded-lg bg-[#f0f3f4] h-14 p-4 text-base placeholder:text-gray-500"/>
                <p class="text-red-500 text-sm mt-1" th:if="${#fields.hasErrors('stock')}" th:errors="*{stock}"></p>
            </div>

            <!-- IMAGEN -->
            <div class="p-4">
                <div class="flex flex-col items-center gap-6 rounded-lg border-2 border-dashed border-gray-300 px-6 py-14">
                    <p class="text-lg font-bold text-center">Subir Imagen del Producto</p>
                    <p class="text-sm text-center text-gray-600">Arrastra y suelta o haz clic para subir</p>
                    <input type="file" name="archivoImagen"
                           class="form-input w-full max-w-sm rounded-lg bg-[#f0f3f4] p-2"/>
                </div>
            </div>

            <!-- BOTONES -->
            <div class="flex px-4 py-3 gap-3">
                <button type="submit"
                        class="flex-1 bg-[#42c5f0] text-black font-bold rounded-lg h-10 px-4">
                    Guardar
                </button>
                <a th:href="@{/productos}"
                   class="flex-1 bg-gray-300 text-black font-bold rounded-lg h-10 px-4 text-center flex items-center justify-center">
                    Cancelar
                </a>
            </div>

            <!-- ERROR GENERAL -->
            <div th:if="${errorMsg}" class="text-red-500 text-center mt-3" th:text="${errorMsg}"></div>
        </form>
    </div>

    <!-- FOOTER -->
    <footer class="bg-black text-white text-center py-4">
        <p>&copy; 2023 Dulce Delicia. Todos los derechos reservados.</p>
    </footer>
</div>

</body>
</html>
